/* content-tile.component.less

   Note: we need to support both the original markup
   of <figure> and the new .content-tile__figure version.

  ================================================== */
  // Grid layout: global rules + option variants
  .content-tile {
    width: 100%;
    
    // Child el margins
    * {
      margin-top: 0;
      margin-bottom: 0;
    }
    
    figure, .content-tile__figure {
      // Bootstrap override
      margin: 0;
      // Do not render underline for what should be block-level links
      > a { &:hover, &:active, &:focus { text-decoration: none; } }
    }
    
    picture {
      display: block;
      overflow: hidden;
    }
    
    // Sibling content within caption
    figcaption, .content-tile__figcaption {
      *:not(li) + *:not(li) {
        margin-top: 20px;
        margin-bottom: 0;
      }
    }
    
    // Title (new class generated by AEM Component)
    &__title { 
      .h2;
      color: @color--cappuccino;
    }
    
    // Holds authored text (.content-tile-text)
    &-text {
      *:not(li):not(br) + *:not(li):not(br) {
        margin-top: 20px;
        margin-bottom: 0;
      }
      * + br,
      br + * {
        margin-top: 0;
      }
    }
    
    // In some cases there was no spacing between tile and col control; exclude hero types
    &:not([class*="content-tile-hero-"]) + * { margin-top: 20px; }
    
    // Stacked .content-tiles els in a single column
    + .content-tile { margin-top: 20px; }

    // Multiple buttons in a single container (not block buttons)
    &[class*="button-"].default-btn-width {
      figcaption, .content-tile__figcaption {
        a:not([name]):not([id]) { padding-right: 1.66em!important; }
        @media (min-width: (@mobile - 1)) {
          a + a { margin-top: 0; }
        }
      }
    }

    &.color--chalk-white:not([class^="button-"]):not([class*="button-"]) {
      a:hover, a:active, a:focus { color: @color--chalk-white !important; }
    }

    // Set foreground colors to white for colors
    // whose perceived luminance < 127.5
    // This replaces legacy ".dark-background"
    // JavaScript logic + clears some other rules.
    // Background color for Content Tile is no
    // longer set on <figure>; instead it is set
    // where class gets applied: on the .content-tile
    // <div> itself;
    &:not(.content-tile-expander-show-more) {
      &.bgcolor--black,
      &.bgcolor--ink-black,
      &.bgcolor--cappuccino,
      &.bgcolor--graphite-grey,
      &.bgcolor--grass-green,
      &.bgcolor--ink-blue,
      &.bgcolor--midnight-blue,
      &.bgcolor--pearson-blue,
      &.bgcolor--pearson-blue-link,
      &.bgcolor--pearson-blue-nav,
      &.bgcolor--purple-plue,
      &.bgcolor--royal-purple,
      &.bgcolor--soft-black,
      &.bgcolor--strawberry-red,
      &.bgcolor--grey-15,
      &.bgcolor--grey-20,
      &.bgcolor--grey-30,
      &.bgcolor--grey-35 {
        *:not(a) { color: @color--chalk-white !important; }
      }
    }
        
  } // end .content-tile
